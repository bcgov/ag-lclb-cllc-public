<div [ngBusy]="busy"></div>
<div *ngIf="application">
  <ng-template #applicationContent>
    <div *ngIf="account?.businessType" [ngClass]="{'hide': mode === UPLOAD_FILES_MODE}">

      <div [formGroup]="form" style="padding-left: 45px; position: relative">
        <!-- Title -->
        <h1 class="ngtest-page-title" *ngIf="!this.isOpenedByLGForApproval">{{ htmlContent?.title }}</h1>
        <h1 class="ngtest-page-title" *ngIf="this.isOpenedByLGForApproval">Provide Comment on Application</h1>
      </div>

      <div [formGroup]="form" class="application-wrapper">
        <!-- Preamble -->
        <section class="d-flex">

          <div class="flex-grow-0" style="width: 50px; background-color: #E1E8F2;"></div>
          <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
            <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.preamble"></section>
            <p><i class="fa fa-save" style="margin-right: 10px;"></i>If you leave this page, the information you input
              will be saved. You can continue later from the dashboard.</p>
          </div>
        </section>

        <!-- Before Starting -->
        <h3 *ngIf="htmlContent?.beforeStarting" class="blue-header">
          BEFORE STARTING
          THE APPLICATION
        </h3>
        <section *ngIf="htmlContent?.beforeStarting" class="padded-section content-bottom">
          <div class="ngtest-before-starting-content" [innerHTML]="htmlContent.beforeStarting"></div>
        </section>

        <!-- Establishment Name -->
        <section class="ngtest-property-details" *ngIf="application?.applicationType?.showPropertyDetails">
          <h3 class="blue-header">ESTABLISHMENT DETAILS</h3>
          <section class="padded-section content-bottom">
            <div style="position: relative">

              <section *ngIf="application?.applicationType?.establishmentName === FormControlState.Show">
                <label for="">Establishment Name</label>
                <br>

                <p *ngIf="application?.licenseType == 'Cannabis Retail Store'">
                  A name cannot mislead the public about what kind of business the licensee operates. The name cannot
                  imply a
                  licensee is selling medical cannabis, and cannot include words in any form or combination or manner
                  the
                  words "apothecary", "pharmacy", "medicines", "drugs", "drug store", "drug department", "dispensary"
                  or any other words of similar meaning that imply licensing under the Pharmacy Operations and Drug
                  Scheduling Act. Store names cannot also use language that encourages intoxication.
                </p>

                <p *ngIf="application?.licenseType == 'Cannabis Retail Store'">
                  Additionally, a name cannot imply an association with another business. This applies to signs,
                  trademarks and any type of branding.
                </p>

                <p *ngIf="application?.licenseType == 'Cannabis Retail Store'">
                  Establishment names will be reviewed for approval during the application process. For more
                  information,
                  please see the <a routerLink="/policy-document/store-name">
                    Non-Medical Cannabis Retail Store Name Approval
                    Process
                  </a>.
                </p>
              </section>
              <div *ngIf="application?.licenseType == 'Cannabis Retail Store'">
                <app-field *ngIf="showFormControl(application?.applicationType?.establishmentName)"
                  [label]="getEstablishmentLabel(application?.applicationType)" [required]="true"
                  [valid]="isValidOrNotTouched('establishmentName')"
                  errorMessage="{{form.get('establishmentName').errors && form.get('establishmentName').errors['forbiddenName'] ? 'The store name contains at least one word that doesn’t comply with naming requirements. The application can’t be submitted until the prohibited word(s) are removed.' : 'Establishment Name is a required field'}}">
                  <input class="form-control" style="width: 500px;" type="text"
                    [readonly]="application?.applicationType?.establishmentName === FormControlState.Reaonly"
                    (change)="checkPossibleProblematicWords()" formControlName="establishmentName"
                    id="establishmentName">
                </app-field>
                <div *ngIf="possibleProblematicNameWarning" class="warning-state">
                  Caution: The store name might contain at least one word that doesn’t comply with the naming
                  requirements.
                  Double check the store name before submitting the application.
                </div>
              </div>
              <!-- Non Cannabis Establishment Name input-->
              <div *ngIf="application?.licenseType != 'Cannabis Retail Store'">
                <app-field *ngIf="showFormControl(application?.applicationType?.establishmentName)" [required]="true">
                  <input class="form-control" style="width: 500px;" type="text"
                    [readonly]="application?.applicationType?.establishmentName === FormControlState.Reaonly"
                    formControlName="establishmentName" id="establishmentName">
                </app-field>
              </div>


            </div>
            <div formGroupName="assignedLicence"
              *ngIf="showFormControl(application?.applicationType?.currentEstablishmentAddress)">
              <h3 class="blue-header">CURRENT ADDRESS</h3>
              <div class="content-bottom">
                <p>The licenced establishment is currently located at the following address:</p>
                <address class="row">
                  <app-field class="col-md-12 col-xs-12" label="Address" [isFullWidth]="true">
                    <input class="form-control" type="text" readonly formControlName="establishmentAddressStreet"
                      id="establishmentAddressStreet">
                  </app-field>
                  <app-field class="col-md-4 col-xs-12" label="City" [isFullWidth]="true">
                    <input class="form-control" type="text" readonly formControlName="establishmentAddressCity"
                      id="establishmentAddressCity">
                  </app-field>
                  <section class="col-md-4 col-xs-12">
                    <app-field label="Province" [isFullWidth]="true">
                      <input class="form-control" readonly type="text" value="British Columbia">
                    </app-field>
                  </section>
                  <section class="col-md-4 col-xs-12">
                    <app-field label="Postal Code">
                      <input class="form-control" type="text" readonly formControlName="establishmentAddressPostalCode"
                        id="establishmentAddressPostalCode">
                    </app-field>
                  </section>
                  <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
                    <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
                  </app-field>
                </address>
                <div class="light-blue-bg" style="display: flex;">
                  <div style="flex: 0 0 210px;">
                    <app-field label="Parcel Identifier (PID)">
                      <input type="text" readonly class="form-control" (keydown)="rejectIfNotDigitOrBackSpace($event)"
                        style="width: 200px;" formControlName="establishmentParcelId"
                        id="establishmentAddressPostalCode">
                    </app-field>
                  </div>
                </div>
              </div>
            </div>

            <h3 class="blue-header" *ngIf="showFormControl(application?.applicationType?.newEstablishmentAddress)">
              ADDRESS
            </h3>

            <div class="ngtest-new-address content-bottom"
              *ngIf="showFormControl(application?.applicationType?.newEstablishmentAddress)">
              <p *ngIf="application?.licenseType !== 'Rural Agency'">The proposed location of the licenced
                establishment:</p>
              <p *ngIf="application?.licenseType === 'Rural Agency'">Include any information necessary for finding the
                site (i.e. route number, mile marker, etc.).</p>
              <address class="row">
                <app-field class="col-md-12 col-xs-12" label="Address" [required]="true" [isFullWidth]="true"
                  [valid]="isValidOrNotTouched('establishmentAddressStreet')"
                  errorMessage="Please enter the street address">
                  <input class="form-control" type="text" autocomplete="address-line1"
                    formControlName="establishmentAddressStreet" id="establishmentAddressStreet">
                </app-field>
                <app-field class="col-md-4 col-xs-12" label="City" [required]="true" [isFullWidth]="true"
                  [valid]="isValidOrNotTouched('establishmentAddressCity')" errorMessage="Please enter the city">
                  <input class="form-control" type="text" autocomplete="address-level2"
                    formControlName="establishmentAddressCity" id="establishmentAddressCity">
                </app-field>
                <section class="col-md-4 col-xs-12">
                  <app-field label="Province" [isFullWidth]="true">
                    <input class="form-control" autocomplete="address-level1" readonly type="text"
                      value="British Columbia">
                  </app-field>
                </section>
                <section class="col-md-4 col-xs-12">
                  <app-field label="Postal Code" [required]="true" [isFullWidth]="true"
                    [valid]="isValidOrNotTouched('establishmentAddressPostalCode')"
                    errorMessage="Please enter the postal code">
                    <input class="form-control" type="text" autocomplete="postal-code"
                      formControlName="establishmentAddressPostalCode" id="establishmentAddressPostalCode">
                  </app-field>
                </section>
                <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
                  <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
                </app-field>
              </address>

              <div class="light-blue-bg" style="display: flex;">
                <div style="flex: 0 0 210px;">
                  <app-field label="Parcel Identifier (PID)" [valid]="isValidOrNotTouched('establishmentParcelId')"
                    errorMessage="Please enter the Parcel Identifier (format: 9 digits)" [required]="true">
                    <input type="text" class="form-control" style="width: 200px;"
                      (keydown)="rejectIfNotDigitOrBackSpace($event)" maxlength=9
                      formControlName="establishmentParcelId" id="establishmentParcelId">
                  </app-field>
                </div>
                <div style="flex: 1; font-size: 11px;">
                  <span>

                    <span>
                      <i class="fas fa-exclamation-circle" style="margin-right: 10px;"></i>The property’s PID may be
                      found
                      on
                    </span> <br>
                    <ul style="display: inline-block">
                      <li>The title to the property</li>
                      <li>Through the B.C. Land Title and Survey Authority</li>
                      <li>The tax assessment notice from BC Assessment</li>
                    </ul>
                  </span>

                  <ul style="display: inline-block">
                    <li>BC Assessment’s e-valueBC website </li>
                    <li>The municipal tax notice</li>
                    <li>The property lease</li>
                  </ul>
                </div>
              </div>
              <p>&nbsp;</p>
            </div>

            <!-- Local Government and Police Durisdiction -->
            <section class="pt-3" *ngIf="showFormControl(application?.applicationType?.lGandPoliceSelectors)"
              appRemoveIfFeatureOff="LGApprovals">

              <section class="ngtest-lg-instructions" [innerHTML]="htmlContent?.lGInstructions "></section>

              <app-field label="Local Government/Indigenous Nation" [required]="false"
                [valid]="isValidOrNotTouched('indigenousNation')" errorMessage="Please select value">
                <input type="text" class="form-control" style="width: 500px;" placeholder=""
                  formControlName="indigenousNation" [matAutocomplete]="lgAutoCompleteBox" #lgAutoCompleteTrigger>
                <mat-autocomplete #lgAutoCompleteBox="matAutocomplete" [displayWith]="autocompleteDisplay">
                  <mat-option *ngFor="let item of autocompleteLocalGovernmemts" [value]="item">
                    {{item.name}}
                  </mat-option>
                </mat-autocomplete>
              </app-field>

              <app-field label="Police Jurisdiction" [required]="false"
                [valid]="isValidOrNotTouched('policeJurisdiction')" errorMessage="Please select value">
                <input type="text" class="form-control" style="width: 500px;" placeholder=""
                  formControlName="policeJurisdiction" [matAutocomplete]="pdAutocompleteBox" #pdAutoCompleteTrigger>
                <div class="position-relative">

                  <mat-autocomplete #pdAutocompleteBox="matAutocomplete" [displayWith]="autocompleteDisplay">
                    <mat-option *ngFor="let item of autocompletePoliceDurisdictions" [value]="item">
                      {{item.name}}
                    </mat-option>
                  </mat-autocomplete>
                </div>
              </app-field>
            </section>

            <!-- Store Contact Info -->
            <section *ngIf="showFormControl(application?.applicationType?.storeContactInfo)">
              <h3 class="blue-header">Establishment Contact Details</h3>
              <div style="flex: 0 0 210px;" class="content">
                <p>The phone and email address used to contact your establishment:</p>
                <app-field label="Store Email" [required]="false" [valid]="isValidOrNotTouched('establishmentEmail')"
                  errorMessage="Please enter an email address">
                  <input type="text" class="form-control" style="width: 200px;" autocomplete="email"
                    [readonly]="application?.applicationType?.storeContactInfo === FormControlState.Reaonly"
                    formControlName="establishmentEmail" id="establishmentEmail">
                </app-field>
              </div>
              <div style="flex: 0 0 210px;" class="content-bottom">
                <app-field label="Store Phone" [required]="false" [valid]="isValidOrNotTouched('establishmentPhone')"
                  errorMessage="Please enter a phone number ">
                  <input type="text" class="form-control" style="width: 200px;" mask="(000) 000-0000" autocomplete="tel"
                    [readonly]="application?.applicationType?.storeContactInfo === FormControlState.Reaonly"
                    formControlName="establishmentPhone" id="establishmentPhone">
                </app-field>
              </div>
              <p>&nbsp;</p>
            </section>
            <!-- RAS Details -->
            <section *ngIf="application?.licenseType === 'Rural Agency'">
              <h3 class="blue-header">Rural Agency Store Details</h3>
              <div class="content-bottom">
                <p>Please provide the following details about your Rural Agency Store:</p>
                <!-- RAS Certificate Number -->
                <app-field label="Rural Agency Store Certificate Number:" errorMessage="Please enter a certificate number">
                  <input type="text" class="form-control" style="width: 200px;" id="certNumber" formControlName="description1" mask="000">
                </app-field>

                <section style="width:700px;">
                  <div>
                    <mat-checkbox formControlName="isOwner">
                      This information is being submitted by the owner of the business in respect of which the licence is to be issued or will become the owner before the licence is issued.
                    </mat-checkbox>
                  </div>
                  <div>
                    <mat-checkbox formControlName="hasValidInterest">
                      At the time of this information submission, the owner of the business is:
                      <ul>
                        <li>The owner of or has an agreement to purchase the place or premises that will form the
                          proposed
                          establishment, or</li>
                        <li>The lessee or has a binding offer to lease the place or premises that will form the proposed
                          establishment
                        </li>
                      </ul>
                    </mat-checkbox>
                  </div>
                  <div>
                    <mat-checkbox formControlName="willhaveValidInterest">
                      I confirm that current zoning permits retail sales on the manufacturing site.
                    </mat-checkbox>
                  </div>
                  <p>&nbsp;</p>
                </section>
              </div>

            </section>

          </section>
        </section>

        <section *ngIf="application?.licenseType === 'Manufacturer'">
          <!-- Business Plan for Manufacturers-->
          <h3 class="blue-header">Manufacturer Business Plan</h3>
          <div class="content-bottom">
            <p>Please select the type of application you are submitting:</p>
            <app-field [showChevrons]="false" errorMessage="Please select a licence type" [isFullWidth]="true">
              <mat-radio-group formControlName="mfgType">
                <mat-radio-button class="mr-5" value="Winery">Winery</mat-radio-button>
                <mat-radio-button class="mr-5" value="Distillery">Distillery</mat-radio-button>
                <mat-radio-button class="mr-5" value="Brewery">Brewery</mat-radio-button>
                <mat-radio-button class="mr-5" value="Co-packer">Co-packer</mat-radio-button>
              </mat-radio-group>
            </app-field>

            <div *ngIf="hasType()">
              <p>Your application must include a business plan that describes your proposed operations, including:</p>
              <ul>
                <li>Financial statements outlining production (in litres) and sales forecasts for a three year period.
                </li>
                <li>Your proposed product(s), and any plans regarding contract manufacturing (you manufacturing for
                  others,
                  and/or them manufacturing for you) and
                  the manufacturer(s) involved. </li>
                <li>Your proposed agricultural sources (e.g. grapes, hops) and whether all sources will be from B.C.
                </li>
                <li>What stages of manufacturing will be taking place at your manufacturing site. (Please note: winery
                  applicants must
                  demonstrate that they will produce at least 4,500 litres per year on site. Onsite production means
                  fermenting
                  and at least one of the
                  following winemaking steps: blending, crushing, filtering, aging for at least 3 months, secondary
                  fermentation
                  or carbonation, and packaging.)</li>
                <li>Whether you will be using neutral grain spirits.</li>
                <li>A list of all manufacturing equipment including equipment costs (to be eligible for a licence, you
                  must
                  demonstrate that you own or lease the equipment
                  necessary to manufacture on-site, and you must continue to maintain that equipment to renew your
                  licence).
                </li>
                <li>Where you will store packaged products, if not on-site. </li>
                <li *ngIf="isBrewery()">Whether your brewery will operate in conjunction with a liquor primary (brewpub)
                  at the
                  same site, and whether product will be piped in from the brewery to serve on tap.</li>
                <li *ngIf="isBrewery()">A sample of the brew sheets you intend to use in your production.</li>
                <li *ngIf="isBrewery() || isWinery()">Your business insurance certificate.</li>
                <li *ngIf="isBrewery() || isDistillery()">How you plan to distribute your packaged product.</li>
                <li *ngIf="isWinery()">If you don't have productive crops yet, explain when planting will take place and
                  when
                  you will have product (e.g. grapes) to use in production. </li>
                <li *ngIf="isWinery()">Explain if you will be leasing any of your agricultural land to others, or
                  selling
                  agricultural products to others, and identify who. </li>
                <li *ngIf="isWinery()">Explain if you will be leasing lands from others, or buying agricultural products
                  from
                  others, identify who, and provide lease and/or contract fruit documents.</li>
                <li *ngIf="isWinery()">Identify your winemaker, and whether they produce for another winery.</li>
              </ul>
              <p *ngIf="isDistillery()">The Office of the Fire Commissioner (OFC) requires that a distillery
                owner/applicant
                construct and maintain their distillery in conformance with the BC Fire Code
                requirements for fire prevention/protection. A copy of the Approval in Principal letter will be provided
                to OFC.
              </p>

              <hr>
              <app-field [valid]="isValidOrNotTouched('zoningPermitsMFG')" [showChevrons]="false"
                errorMessage="Please confirm that the current zoning permits manufacturing on the manufacturing site"
                [isFullWidth]="true" style="margin-left:10px;">
                <mat-checkbox formControlName="zoningPermitsMFG">
                  I confirm that current zoning permits manufacturing on the manufacturing site.</mat-checkbox>
              </app-field>
              <app-field [valid]="isValidOrNotTouched('zoningPermitsRetailSales')" [showChevrons]="false"
                errorMessage="Please confirm that the current zoning permits retail sales on the manufacturing site"
                [isFullWidth]="true" style="margin-left:10px;">
                <mat-checkbox formControlName="zoningPermitsRetailSales">
                  I confirm that current zoning permits retail sales on the manufacturing site.</mat-checkbox>
              </app-field>
              <div>
                <table>
                  <tr>
                    <td class="primary">
                      <div class="question-label">
                        Is this manufacturing site part of the Agricultural Land Reserve (ALR)?
                      </div>
                    </td>
                    <td>
                      <mat-button-toggle-group formControlName="isALR" aria-label="Font Style">
                        <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                        <mat-button-toggle value="No">No</mat-button-toggle>
                      </mat-button-toggle-group>
                    </td>
                  </tr>
                </table>
              </div>


              <app-field [valid]="isValidOrNotTouched('meetsALRRequirements')" [showChevrons]="false"
                errorMessage="Please confirm that the site meets ALR requriements" [isFullWidth]="true"
                style="margin-left:10px;">
                <mat-checkbox formControlName="meetsALRRequirements">
                  I confirm that the manufacturing site meets ALR requirements.</mat-checkbox>
              </app-field>
              <section>

              </section>

              <hr>
              <h4>Production and Sales Forecasts</h4>
              <p>Upload financial statements outlining production (in litres) and sales forecasts for a three year
                period: </p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Financial Statement"
                  [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT."
                  [multipleFiles]="true" entityName="application" [enableFileDeletion]="!isOpenedByLGForApproval"
                  [useDocumentTypeForName]="true" [entityId]="applicationId"
                  [uploadHeader]="'TO UPLOAD FINANCIAL STATEMENTS, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>
              <hr>
              <h4>Proposed Products</h4>
              <p>Upload a document that describes your proposed product(s), and any plans regarding contract
                manufacturing (you
                manufacturing for others, and/or them manufacturing for you) and the manufacturer(s) involved:</p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Proposed Products"
                  [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT."
                  [multipleFiles]="true" entityName="application" [enableFileDeletion]="!isOpenedByLGForApproval"
                  [useDocumentTypeForName]="true" [entityId]="applicationId"
                  [uploadHeader]="'TO UPLOAD PROPOSED PRODUCTS DESCRIPTION, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>
              <hr>
              <h4>Proposed Agricultural Sources</h4>
              <p>Upload a document that describes your proposed agricultural sources (e.g. grapes, hops) and whether all
                sources
                will
                be from B.C.:</p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Agricultural Sources"
                  [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT."
                  [multipleFiles]="true" entityName="application" [enableFileDeletion]="!isOpenedByLGForApproval"
                  [useDocumentTypeForName]="true" [entityId]="applicationId"
                  [uploadHeader]="'TO UPLOAD AGRICULTURAL SOURCES DESCRIPTION, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>
              <section class="content-bottom" style='border-top: solid #aaa 1px; margin-top:0px;'>
                <p>Indicate the amount of grapes, fruit and honey that will be farmed at the winery site and used for
                  the production
                  of wine:
                </p>
                <div class="row">
                  <app-field class="col-md-12 col-xs-12" label="Grapes: # of acres"
                    errorMessage="Please enter the number of acress of production">
                    <input type="text" class="form-control" style="width: 100px;">
                  </app-field>
                  <app-field class="col-md-12 col-xs-12" label="Fruit: # of acres"
                    errorMessage="Please enter the number of acress of production">
                    <input type="text" class="form-control" style="width: 100px;">
                  </app-field>
                  <app-field class="col-md-12 col-xs-12" label="Honey: # of beehives"
                    errorMessage="Please enter the number of acress of production">
                    <input type="text" class="form-control" style="width: 100px;">
                  </app-field>
                </div>

              </section>
              <hr>
              <h4>Stages of Manufacturing Taking Place Onsite</h4>
              <p>Upload a document that describes the stages of manufacturing will be taking place at your manufacturing
                site.
              </p>
              <p *ngIf="isWinery()">(Please note: winery applicants must demonstrate that they
                will produce at least 4,500 litres per year on site. Onsite production means fermenting and at least one
                of the
                following winemaking
                steps: blending, crushing, filtering, aging for at least 3 months, secondary fermentation or
                carbonation, and
                packaging.)</p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Manufacturing Stages"
                  [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT."
                  [multipleFiles]="true" entityName="application" [enableFileDeletion]="!isOpenedByLGForApproval"
                  [useDocumentTypeForName]="true" [entityId]="applicationId"
                  [uploadHeader]="'TO UPLOAD MANUFACTURING STAGES DESCRIPTION, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>

              <section>
                <hr>
                <table>
                  <tr>
                    <td class="primary">
                      <div class="question-label">
                        Will you be using neutral grain spirits?
                      </div>
                    </td>
                    <td>
                      <mat-button-toggle-group formControlName="neutralGrain" aria-label="Font Style">
                        <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                        <mat-button-toggle value="No">No</mat-button-toggle>
                      </mat-button-toggle-group>
                    </td>
                  </tr>
                </table>
              </section>

              <hr>
              <h4>Manufacturing Equipment</h4>
              <p>Upload a list of all manufacturing equipment including equipment costs (to be eligible for a licence,
                you must
                demonstrate that
                you own or lease the equipment necessary to manufacture on-site, and you must continue to maintain that
                equipment to renew your licence).:</p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Manufacturer Equipment"
                  [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT."
                  [multipleFiles]="true" entityName="application" [enableFileDeletion]="!isOpenedByLGForApproval"
                  [useDocumentTypeForName]="true" [entityId]="applicationId"
                  [uploadHeader]="'TO UPLOAD MANUFACTURING EQUIPMENT LIST, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>

              <hr>
              <h4>Packaged Product Storage</h4>
              <p>Upload a description of where you will store packaged products:</p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Agricultural Sources"
                  [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT."
                  [multipleFiles]="true" entityName="application" [enableFileDeletion]="!isOpenedByLGForApproval"
                  [useDocumentTypeForName]="true" [entityId]="applicationId"
                  [uploadHeader]="'TO UPLOAD AGRICULTURAL SOURCES DESCRIPTION, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>

              <div *ngIf="isBrewery()">
                <hr>
                <!-- Brewery Question-->
                <table>
                  <tr>
                    <td class="primary">
                      <div class="question-label">
                        Will your brewery operate in conjunction with a liquor primary (brewpub) at the same site?
                      </div>
                    </td>
                    <td>
                      <mat-button-toggle-group formControlName="brewPub" aria-label="Font Style">
                        <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                        <mat-button-toggle value="No">No</mat-button-toggle>
                      </mat-button-toggle-group>
                    </td>
                  </tr>
                  <tr *ngIf="isBrewPub()">
                    <td class="sub">
                      <div class="question-label">
                        Will product be piped in from the brewery to serve on tap?
                      </div>
                    </td>
                    <td>
                      <mat-button-toggle-group formControlName="pipedIn" aria-label="Font Style">
                        <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                        <mat-button-toggle value="No">No</mat-button-toggle>
                      </mat-button-toggle-group>
                    </td>
                  </tr>
                  <tr *ngIf="isBrewPub()">
                    <td colspan=2 class="sub">
                      <p>Upload a document that describes a sample of the brew sheets you intend to use in your
                        production:</p>
                      <section>
                        <app-file-uploader *ngIf="applicationId" documentType="Sample Brew Sheet"
                          [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
                          fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application"
                          [useDocumentTypeForName]="true" [entityId]="applicationId"
                          [uploadHeader]="'TO UPLOAD SAMPLE BREW SHEET, DRAG FILES HERE OR'">
                        </app-file-uploader>
                      </section>
                    </td>
                  </tr>
                </table>
              </div>
              <div *ngIf="isBrewery() || isWinery()">
                <hr>
                <h4>Business Insurance</h4>
                <p>Upload your business insurance certificate:</p>
                <section>
                  <app-file-uploader *ngIf="applicationId" documentType="Business Insurance Certificate"
                    [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
                    fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application"
                    [useDocumentTypeForName]="true" [entityId]="applicationId"
                    [uploadHeader]="'TO UPLOAD BUSINESS INSURANCE CERTIFICATE, DRAG FILES HERE OR'">
                  </app-file-uploader>
                </section>
              </div>
              <div *ngIf="isBrewery() || isDistillery()">
                <hr>
                <h4>Distribution Plan</h4>
                <p>Upload a description of how you plan to distribute your packaged product:</p>
                <section>
                  <app-file-uploader *ngIf="applicationId" documentType="Distribution Plan"
                    [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
                    fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application"
                    [useDocumentTypeForName]="true" [entityId]="applicationId"
                    [uploadHeader]="'TO UPLOAD DISTRIBUTION PLAN, DRAG FILES HERE OR'">
                  </app-file-uploader>
                </section>
              </div>

              <!-- TO DO wineries questions-->

            </div>
          </div>
        </section>

        <!-- Dynamic form details-->
        <section *ngIf="application?.applicationType?.formReference && dynamicsForm?.tabs">
          <h3 class="blue-header">Application Details</h3>
          <div *ngFor="let formTab of dynamicsForm.tabs" class='content'>
            <!-- <h3 class="blue-header">{{formTab.name}}</h3>-->
            <div *ngFor="let formSection of formTab.sections; let i = index;">
              <div *ngIf="formSection.visible">
                <section class="padded-section">
                  <label for="" *ngIf="formSection.name">{{formSection.name}}</label>
                  <div *ngFor="let formField of formSection.fields">
                    <div *ngIf="formField.visible">
                      <div *ngIf="formField.datafieldname === 'establishmentParcelId'">
                        <div class="light-blue-bg" style="display: flex;">
                          <div style="flex: 0 0 210px;">
                            <app-field label="Parcel Identifier (PID)"
                              [valid]="isValidOrNotTouched('establishmentParcelId')"
                              errorMessage="Please enter the Parcel Identifier (format: 9 digits)" [required]="true">
                              <input type="text" class="form-control" style="width: 200px;"
                                (keydown)="rejectIfNotDigitOrBackSpace($event)" maxlength=9
                                formControlName="establishmentParcelId" id="establishmentParcelId">
                            </app-field>
                          </div>
                          <div style="flex: 1; font-size: 11px;">
                            <span>

                              <span>
                                <i class="fas fa-exclamation-circle" style="margin-right: 10px;"></i>The property’s PID
                                may be
                                found
                                on
                              </span> <br>
                              <ul style="display: inline-block">
                                <li>The title to the property</li>
                                <li>Through the B.C. Land Title and Survey Authority</li>
                                <li>The tax assessment notice from BC Assessment</li>
                              </ul>
                            </span>

                            <ul style="display: inline-block">
                              <li>BC Assessment’s e-valueBC website </li>
                              <li>The municipal tax notice</li>
                              <li>The property lease</li>
                            </ul>
                          </div>
                        </div>
                        &nbsp;<br />
                      </div>

                      <app-field
                        *ngIf="formField.controltype == 'TextBoxControl' && formField.datafieldname !== 'establishmentParcelId'"
                        [label]="formField.name" [required]="formField.required">
                        <input class="form-control" style="width: 500px;" type="text"
                          [formControlName]="formField.datafieldname" [id]="formField.datafieldname" />
                      </app-field>
                      <div class="padded-section" style="padding-left: 20px;"
                        *ngIf="formField.controltype == 'TextAreaControl'">
                        <app-field [label]="formField.name" [required]="formField.required" [isFullWidth]="true"
                          [valid]="isValidOrNotTouched(formField.datafieldname)" [showChevrons]="false">
                          <textarea rows="8" style="width: 100%;" maxlength="5000"
                            [formControlName]="formField.datafieldname" [id]="formField.datafieldname"></textarea>
                        </app-field>
                      </div>

                      <app-field *ngIf="formField.controltype == 'DateTimeControl'" [label]="formField.name"
                        [required]="formField.required">
                        <input type="text" style="width: 200px; background-color: #fff;"
                          [formControlName]="formField.datafieldname" [id]="formField.datafieldname"
                          placeholder="yyyy-mm-dd" readonly class="form-control" [min]="minDate" [max]="currentDate"
                          [matDatepicker]="picker" (focus)="picker.open()" (click)="picker.open()">
                        <mat-datepicker #picker></mat-datepicker>
                      </app-field>

                      <mat-card *ngIf="formField.controltype == 'PicklistControl'" class="mat-elevation-z0"
                        style="margin-bottom: 10px;">
                        <section style="display: flex; justify-content: space-between; width: 100%;">
                          <div class="question-label">
                            {{formField.name}}
                          </div>
                          <div style="flex: 0 0 85px;">
                            <mat-button-toggle-group aria-label="Font Style" [formControlName]="formField.datafieldname"
                              [id]="formField.datafieldname">

                              <mat-button-toggle *ngFor="let option of formField.options" [value]="option.value">
                                {{option.label}}</mat-button-toggle>
                            </mat-button-toggle-group>
                          </div>
                        </section>
                      </mat-card>

                      <app-field *ngIf="formField.controltype == 'LookupControl'" [label]="formField.name"
                        [required]="formField.required">
                        Lookup
                      </app-field>

                      <app-field *ngIf="formField.controltype == 'RadioControl'"
                        [valid]="!showValidationMessages || form.get(formField.datafieldname).valid" errorMessage=""
                        [showChevrons]="false">
                        <section style="display: flex">
                          <input type="checkbox" [formControlName]="formField.datafieldname"
                            [id]="formField.datafieldname">
                          <span class="error-states">*</span>
                          <div style="padding-left: 10px;">
                            {{formField.name}}
                          </div>
                        </section>
                      </app-field>

                    </div>

                  </div>

                </section>
              </div>

            </div>
          </div>
          <div class="content-bottom">&nbsp;</div>
        </section>

        <section *ngIf="application?.applicationType?.showDescription1">
          <h3 class="blue-header">DESCRIPTION OF CHANGE</h3>
          <div class="padded-section">
            <app-field label="Please briefly outline the  proposed change" [required]="true" [isFullWidth]="true"
              [showChevrons]="false" [valid]="isValidOrNotTouched('description1')"
              errorMessage="Please enter a description ">
              <textarea formControlName="description1" rows="8" style="width: 100%;" maxlength="5000" minlength="10"
                id="description1"></textarea>
            </app-field>
          </div>
        </section>

        <!-- Photos or Renderings of Signage-->
        <div class="ngtest-photo-signage" *ngIf="showFormControl(application?.applicationType?.signage)">
          <hr>
          <label for="">Photos or renderings of the store's signage</label>
          <br>
          <section *ngIf="application?.applicationType?.signage === FormControlState.Show">

            <p>
              The signage submitted must show the name of the store and all words, images and symbols used in the
              signage.
            </p>

            <p *ngIf="application?.licenseType == 'Cannabis Retail Store'">
              Signage must not contain any pictures, images or symbols that imply the sale of medical cannabis (e.g. a
              green cross). It must not imply an association with another business (other than another non-medical
              cannabis
              retail store).
            </p>
            <p *ngIf="application?.licenseType == 'Cannabis Retail Store'">
              <b>Note:</b> If submitting renderings, renderings may be either printed or hand-drawn (as long as they are
              legible)
            </p>

          </section>

          <p *ngIf="application?.applicationType?.signage === FormControlState.Reaonly">
            The below photos or renderings of
            the store's signage are on file.
          </p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Signage" [disableUploads]="isOpenedByLGForApproval"
              [enableFileDeletion]="!isOpenedByLGForApproval"
              [enableFileDeletion]="application?.applicationType?.signage === FormControlState.Show"
              [useDocumentTypeForName]="true" fileTypes="FILE MUST BE IN PDF, JPG OR PNG FORMAT." [multipleFiles]="true"
              entityName="application" [extensions]="['jpg', 'jpeg', 'png', 'pdf']"
              (numberOfUploadedFiles)="uploadedSignageDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD PHOTOS OR RENDERINGS OF SIGNAGE, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>

        <mat-card *ngIf="showExteriorChangeQuestion()" class="mat-elevation-z0" style="margin-bottom: 10px;">
          <section style="display: flex; justify-content: space-between; width: 100%;">
            <div class="question-label">
              Will the store’s exterior change?
            </div>
            <div style="flex: 0 0 85px;">
              <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('proposedChange')}"
                formControlName="proposedChange" aria-label="Font Style">
                <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                <mat-button-toggle value="No">No</mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </section>
        </mat-card>

        <div class="ngtest-valid-interest" *ngIf="showFormControl(application?.applicationType?.validInterest)">
          <hr>
          <br>
          <label for="" *ngIf="application?.licenseType == 'Cannabis Retail Store'">
            Offer or Proof of Ownership, Lease or
            Sub-Lease
          </label>
          <label for="" *ngIf="application?.licenseType != 'Cannabis Retail Store'">Proof of Valid Interest</label>
          <br>
          <section *ngIf="application?.applicationType?.validInterest === FormControlState.Show">
            <div *ngIf="application?.licenseType == 'Cannabis Retail Store'">
              <p>
                If the applicant currently owns or leases the proposed store location, submit <b>Option 1</b>. If the
                applicant doesn't currently own or lease the proposed store location, submit <b>Option 2</b>.
              </p>
              <p>
                Leases or other arrangements must not expire for at least 12 months from the date the licence is issued.
                Option 1 will be required before the licence is issued.
              </p>
              <p>
                <b>Option 1</b>: Submit a copy of the lease, sub-lease, or proof of ownership of the proposed store
                location.
              </p>
              <p>
                <b>Option 2</b>: Submit a copy of the offer to purchase, lease, or sub-lease the proposed store
                location.
                Note,
              </p>

            </div>
            <div *ngIf="application?.licenseType != 'Cannabis Retail Store'">
              <p>Any one of the following documents can be used to show valid interest in the property:</p>
              <ul>
                <li>Certificate of Title in the licensee's name (as stated on the liquor licence).</li>
                <li>
                  A fully executed lease, an assignment or an offer of lease, which does not expire for at least 12
                  months. The tenant on the lease document must be the licensee (name the liquor licence is issued to).
                  The lease or offer to lease must show rent paid, have a term and an expiry date, and be signed by the
                  licensee and the landlord or property owner.
                </li>
                <li>
                  An offer or option to purchase the property and buildings in the licensee's name (as provided to LCRB
                  ). An offer or option must show price paid, have a term and expiry date and be signed by
                  both the licensee and property owner. If an operated store is relocating, the valid interest must be
                  in the
                  name of the third party operator.
                </li>
                <p>&nbsp;</p>
              </ul>
              <p *ngIf="!isRAS()">
                <strong>Note:</strong> Valid interest must be maintained at the current and proposed site until the
                relocation is finalized. LCRB may request a copy of valid interest at the current site during the
                relocation application process.
              </p>
            </div>

          </section>

          <p *ngIf="application?.applicationType?.validInterest === FormControlState.Reaonly">
            The below offer or proof of ownership, lease or sub-lease is on file.
          </p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Valid Interest"
              fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval"
              [enableFileDeletion]="application?.applicationType?.validInterest === FormControlState.Show"
              [enableFileDeletion]="!isOpenedByLGForApproval" [multipleFiles]="false" entityName="application"
              [useDocumentTypeForName]="true" (numberOfUploadedFiles)="uploadedValidInterestDocuments = $event"
              [entityId]="applicationId" [uploadHeader]="'TO UPLOAD OWNERSHIP OR LEASE DOCUMENTS, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>

        <div class="ngtest-floor-plan" *ngIf="showFormControl(application?.applicationType?.floorPlan)">
          <hr><br>
          <label for="">Floor Plan</label>
          <br>
          <section *ngIf="application?.applicationType?.floorPlan === FormControlState.Show">

            <div *ngIf="application?.licenseType == 'Cannabis Retail Store'">
              <span>
                A floor plan is a document, showing a view from above, of the dimensions and relationships between
                rooms, spaces and other physical features on each floor of a structure. The document must measure at
                least 8.5" x 11" (standard letter size). A floor plan for each level of the establishment must be
                submitted if the proposed establishment has more than one level. Either a hand-drawn or
                computer-generated plan is acceptable, as long as the plan is drawn to scale and is clear and legible. A
                floor plan must not be submitted on graph paper or paper with gridlines.
              </span>
              <div style="display: flex; margin-top: 10px;">
                <section>
                  The floor plan must be submitted at the time of application and it
                  must identify the proposed non-medical cannabis retail area(s) plus
                  the following interior features of the establishment:
                  <ul>
                    <li>Each room or area labeled with its intended use and dimensions.</li>
                    <li>Washrooms, stairs and elevators.</li>
                    <li>Entrances and exits (including those used by staff only).</li>
                    <li>Cannabis storage areas.</li>
                    <li>Sales counter and cash register locations.</li>
                    <li>Furniture and fixture layout (e.g. shelves, display cases).</li>
                    <li>Identify the security system and other physical security features that secure the store.</li>
                  </ul>
                </section>
                <img src="assets/floor-plan-example.png" width="300" alt="Floor plan"
                  style="margin: auto; display: block;">
              </div>

            </div>
            <div *ngIf="application?.licenseType != 'Cannabis Retail Store'">
              <p>The floor plans of the proposed establishment, which must meet the following requirements: </p>
              <ul>
                <li>Must be scaled, clear, legible and include room size dimensions (8.5" x 11") </li>
                <li *ngIf="isRAS()">detail the entire premises in which the business is located, including the area
                  where liquor will be located, entrances, exits, washrooms, storage areas, cash register area, coolers,
                  any adjoining doors and other fixtures</li>
                <li *ngIf="isRAS()">clearly identify any adjoining areas</li>
                <li *ngIf="!isRAS()">Provide room size dimensions </li>
                <li *ngIf="!isRAS()">
                  Detail entrance, exit, washrooms, storage area, cash register area, coolers, any adjoining doors and
                  other fixtures
                </li>
                <li *ngIf="!isRAS()">Clearly identify the area proposed for licensing and any adjoining unlicensed areas
                </li>
              </ul>
            </div>
          </section>
          <p *ngIf="application?.applicationType?.floorPlan === FormControlState.Reaonly">
            The below floor plan is on file.
          </p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Floor Plan" fileTypes="FILE MUST BE IN PDF FORMAT."
              [disableUploads]="isOpenedByLGForApproval"
              [enableFileDeletion]="application?.applicationType?.floorPlan === FormControlState.Show"
              [enableFileDeletion]="!isOpenedByLGForApproval" [multipleFiles]="true" entityName="application"
              [useDocumentTypeForName]="true" (numberOfUploadedFiles)="uploadedFloorPlanDocuments = $event"
              [entityId]="applicationId" [uploadHeader]="'TO UPLOAD FLOOR PLANS, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>
        <br>
        <hr *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSStructuralChange">
        <mat-card *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSStructuralChange"
          class="mat-elevation-z0" style="margin-bottom: 10px;">
          <section style="display: flex; justify-content: space-between; width: 100%;">
            <div class="question-label">
              Does the proposed change involve a shared vestibule or changes to the entrances, exits or windows?
            </div>
            <div style="flex: 0 0 85px;">
              <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('proposedChange')}"
                formControlName="proposedChange" aria-label="Font Style">
                <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                <mat-button-toggle value="No">No</mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </section>
        </mat-card>


        <div class="ngtest-site-plan" *ngIf="showSitePlan()">
          <hr><br>
          <label for="">Site Plan</label>
          <br>
          <div *ngIf="application?.applicationType?.sitePlan === FormControlState.Show">

            <div *ngIf="application?.licenseType == 'Cannabis Retail Store'">
              <span>
                A site plan is a document showing any existing and proposed building footprints, pathways of
                travel, parking, and landscaping elements, and the surrounding area. The document must measure at least
                8.5" x 11" (standard letter size). Either a hand-drawn or computer-generated plan is acceptable, as long
                as the plan is drawn to scale and is clear and legible. A site plan must not be submitted on graph paper
                or paper with gridlines.
              </span>
              <div class="row" style="margin-top: 10px;">
                <div class="col-md-6">
                  <p>
                    The site plan must include the proposed store footprint and a representation of any interior or
                    exterior spaces surrounding the store, including:
                  </p>

                  <ul>
                    <li>
                      The location of any other buildings/businesses on the same site, each building footprint, type
                      of businesses (e.g. gas station, office building) and building names, and their entrances and
                      exits
                    </li>
                    <li>A description of the type of separation proposed (for any adjoining businesses)</li>
                    <li>Road access and exits, including any relevant street names</li>
                    <li>Parking lots.</li>
                  </ul>
                  <img src="assets/site-plan-example.png" width="350" alt="Site plan"
                    style="margin: auto; display: block;">
                </div>
                <div class="col-md-6">
                  <p>
                    If the proposed store is located inside a building with other businesses
                    (e.g. a mall), submit two site plans:
                  </p>
                  <p>
                    1) One site plan showing location of any other buildings/businesses on the same site, including:
                  </p>
                  <ul>
                    <li>
                      Each building footprint, building name and a list of businesses operating inside the building
                    </li>
                    <li>Road access and exits, including any relevant street names, and</li>
                    <li>Parking lots</li>
                  </ul>
                  <p>
                    2) A second site plan showing the location of the proposed store
                    inside the building’s footprint:
                  </p>
                  <ul>
                    <li>All entrances and exits for the building</li>
                    <li>The location, name and type of businesses operating inside the building</li>
                    <li>The store footprint with all entrances and exits for the store, and</li>
                    <li>
                      A description of the type of separation proposed for any business adjoining the proposed store
                    </li>
                  </ul>
                  <p>
                    Full height walls are required for separation and no connecting doors between the cannabis retail
                    store
                    and
                    the neighbouring business are permitted.
                  </p>
                  <p>
                    The cannabis retail store may share a vestibule with another type of business (e.g. a liquor store
                    or
                    grocery
                    store) provided each business has its own controlled entrance within the vestibule. The cannabis
                    retail
                    store
                    cannot share a vestibule with a business that would be contrary to public interest (i.e. business
                    aimed
                    at
                    minors or a liquor consumption business).
                  </p>
                </div>
              </div>
            </div>

          </div>

          <div *ngIf="application?.licenseType != 'Cannnabis Retail Store'">
            <p>A scaled site plan must show the following: </p>
            <ul>
              <li>location of the front entrance door of the proposed establishment</li>
              <li>
                any other buildings/businesses around the proposed establishment and the entrances to those buildings
              </li>
              <li>any relevant street names</li>
            </ul>
          </div>

          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Site Plan" fileTypes="FILE MUST BE IN PDF FORMAT."
              [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
              [enableFileDeletion]="application?.applicationType?.sitePlan === FormControlState.Show"
              [multipleFiles]="true" entityName="application" [useDocumentTypeForName]="true"
              (numberOfUploadedFiles)="uploadedSitePlanDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD SITE PLAN DOCUMENTS, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>

        <div class="ngtest-photos-renderings"
          *ngIf="showExteriorRenderings() || (application?.licenseType != 'Cannabis Retail Store' && application?.applicationType?.sitePlan === FormControlState.Show)">
          <hr>
          <label for="" *ngIf="application?.licenseType == 'Cannabis Retail Store'">
            Photos or renderings of the store's
            proposed exterior changes
          </label>
          <label for="" *ngIf="application?.licenseType != 'Cannabis Retail Store'">Photographs</label>
          <br>
          <section>

            <div *ngIf="application?.licenseType == 'Cannabis Retail Store'">
              <ul>
                <li>Must show that cannabis is not visible from outside the store</li>
                <li>
                  If submitting photos, the photos must be taken specifically for the purpose of the application (not
                  general/stock images) and must be no more than six months old
                </li>
                <li>
                  If submitting renderings, renderings may be either printed or hand-drawn (as long as they are
                  legible)
                </li>
              </ul>
            </div>
            <div *ngIf="application?.licenseType != 'Cannabis Retail Store'">
              <p>
                <u>
                  Provide a minimum four (4) colour photographs of the proposed site, one facing each side of the
                  building/property
                </u>
              </p>
              <p>
                These photos need to be current (taken by the licensee or representative within the past 90 days).
                Pictures from internet sites will not be accepted.
              </p>
            </div>

          </section>

          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Exterior Photos or Renderings"
              [enableFileDeletion]="!isOpenedByLGForApproval" [enableFileDeletion]="true"
              [useDocumentTypeForName]="true" [disableUploads]="isOpenedByLGForApproval"
              fileTypes="FILE MUST BE IN PDF, JPG OR PNG FORMAT." [multipleFiles]="true" entityName="application"
              [extensions]="['jpg', 'jpeg', 'png', 'pdf']"
              (numberOfUploadedFiles)="uploadedPhotosOrRenderingsDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD PHOTOS OR RENDERINGS OF THE STORE EXTERIOR, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>

        <div class="ngtest-grocery-store" *ngIf="showGroceryQuestion()">
          <hr>
          <mat-card class="mat-elevation-z0" style="margin-bottom: 10px;">
            <section style="display: flex; justify-content: space-between; width: 100%;">
              <div class="question-label">
                Will the proposed structural alteration involve removing a wall between the {{application?.licenseType}}
                and an eligible grocery store?
              </div>

              <div style="flex: 0 0 85px;">
                <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('connectedGrocery')}"
                  formControlName="connectedGrocery" aria-label="Font Style">
                  <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                  <mat-button-toggle value="No">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </section>
          </mat-card>
          <div *ngIf="showGroceryStore()">
            <section>
              <p>
                Please download and print the <a
                  href="https://www2.gov.bc.ca/assets/gov/employment-business-and-economic-development/business-management/liquor-regulation-licensing/forms/lcrb090_grocery_store_declaration.pdf">
                  Grocery
                  Store Declaration
                </a> and have it be completed by
                the owner of an eligible grocery store.
              </p>
              <p>An eligible grocery store is defined as:</p>
              <ul>
                <li>
                  primarily engaged in retailing a general line of foods, including canned, dry and frozen food, fresh
                  fruits and vegetables, fresh and prepared meats, fish and poultry, dairy products, baked products and
                  snack foods, and non-liquor beverages, intended for human consumption, and
                </li>
                <li>having an area of at least 10,000 square feet, including storage.</li>
              </ul>
              <p>
                To maintain eligibility, the conditions above must continue to be met, and the sales revenue from food
                and non-liquor liquor beverages must:
              </p>
              <ul>
                <li>total at least 70% of the total sales revenue of non-liquor products, and </li>
                <li>
                  total more than 50% of the total sales revenue of liquor and non-liquor products in the grocery store.
                </li>
              </ul>

            </section>
            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Grocery Declaration"
                [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
                fileTypes="FILE MUST BE IN PDF FORMAT." [enableFileDeletion]="true" [multipleFiles]="false"
                entityName="application" [useDocumentTypeForName]="true"
                (numberOfUploadedFiles)="uploadedGroceryDocuments = $event" [entityId]="applicationId"
                [uploadHeader]="'TO UPLOAD GROCERY DECLARATION, DRAG FILES HERE OR'">
              </app-file-uploader>
            </section>

          </div>

        </div>

        <div class="ngtest-zoning" *ngIf="showZoning()">
          <hr>
          <label for="">Proof of Zoning</label>
          <br>
          <section>
            <p>Please provide proof from your local government that the proposed location has been:</p>
            <ul>
              <li>appropriately zoned to operate a {{application?.licenseType}} licence, or</li>
              <li>is in the process of being appropriately zoned</li>
            </ul>
            <p>
              You are responsible for obtaining the appropriate zoning from your local
              government to operate a {{application?.licenseType}} licence at your proposed location.
              Prior to issuing a licence at the new location, LCRB will require confirmation
              from your local government that the location is zoned appropriately to operate
              a WS licence.
            </p>
          </section>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Zoning" fileTypes="FILE MUST BE IN PDF FORMAT."
              [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
              [enableFileDeletion]="application?.applicationType?.proofofZoning === FormControlState.Show"
              [multipleFiles]="false" entityName="application" [useDocumentTypeForName]="true"
              (numberOfUploadedFiles)="uploadedZoningDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD ZONING DOCUMENTS, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>

        <!-- Hours of Sale -->
        <section class="ngtest-hours-of-sale" *ngIf="application?.applicationType?.showHoursOfSale">
          <h3 class="blue-header">HOURS OF SALE</h3>
          <div class="padded-section content-bottom">
            <p *ngIf="application?.applicationType?.name === ApplicationTypeNames.CannabisRetailStore">
              Indicate the
              store's proposed hours for cannabis sales below. Proposed
              hours must fall between 9 a.m. and 11
              p.m. Cannabis stores must not be open outside of their licensed hours. However, they may choose to be
              closed
              at
              times they are licensed to be open.
            </p>
            <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CannabisRetailStore">
              Indicate the
              store's proposed hours of sales below.
            </p>
            <table class="store-hours">
              <tr>
                <th class="lead"></th>
                <th>Sunday</th>
                <th>Monday</th>
                <th>Tuesday</th>
                <th>Wednesday</th>
                <th>Thursday</th>
                <th>Friday</th>
                <th>Saturday</th>
              </tr>
              <tr>
                <th>Open</th>
                <td>
                  <select class="form-control" formControlName="serviceHoursSundayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursMondayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursTuesdayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursWednesdayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursThursdayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursFridayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursSaturdayOpen">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
              </tr>
              <tr>
                <th>Close</th>
                <td>
                  <select class="form-control" formControlName="serviceHoursSundayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursMondayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursTuesdayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursWednesdayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursThursdayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursFridayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" formControlName="serviceHoursSaturdayClose">
                    <option value=""> -- </option>
                    <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                  </select>
                </td>
              </tr>
            </table>
            <p class="error-states" *ngIf="showValidationMessages && !isHoursOfSaleValid()">
              Hours of Sale are required
            </p>
          </div>
        </section>

        <!-- Licensed Producer -->
        <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
          <h3 class="blue-header">INFORMATION ABOUT THE LICENSED PRODUCER</h3>
          <section class="padded-section">
            <p>
              Which federally licensed producer(s) will the applicant represent in B.C.?
            </p>
            <app-field label="Name of Federal Producer " [required]="true" [valid]="true"
              errorMessage="Please enter the name of federal producer">
              <input class="form-control" formControlName="federalProducerNames" id="federalProducerNames"
                style="width: 350px;" type="text">
            </app-field>
          </section>
        </div>

        <!-- Connections to non-medical -->
        <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
          <h3 class="blue-header">CONNECTIONS TO NON-MEDICAL CANNABIS RETAIL STORE LICENSEES OR APPLICANTS</h3>
          <div class="padded-section" *ngIf="application?.tiedHouse && account?.businessType">
            <app-connection-to-non-medical-stores *ngIf="application?.tiedHouse" [tiedHouse]="application?.tiedHouse"
              licensedProducerText="B.C. non-medical cannabis retail store licensee or applicant"
              federalProducerText="licensee or applicant" [businessType]="account?.businessType"
              (value)="tiedHouseFormData = $event"></app-connection-to-non-medical-stores>
          </div>
        </section>

        <div class="ngtest-associate-upload" *ngIf="application?.applicationType?.showAssociatesFormUpload">
          <br>
          <hr>
          <label for="">Associates Form</label>
          <br>
          <i>
            Please download
            <a *ngIf="account?.businessType === 'SoleProprietor'"
              href="https://www2.gov.bc.ca/assets/download/A61C46EE12464E76BE9594B674CADB93" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf="account?.businessType === 'IndigenousNation'"
              href="https://www2.gov.bc.ca/assets/download/B98C3F6F56204AACB715C71D59249A3C" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf="account?.businessType === 'Society'"
              href="https://www2.gov.bc.ca/assets/download/44B8FA4AA8974880AA1A7392ACC1E406" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf="businessTypeIsPartnership()"
              href="https://www2.gov.bc.ca/assets/download/1002E9464D8349EC8894407AF057446B" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf=" businessTypeIsPrivateCorporation()"
              href="https://www2.gov.bc.ca/assets/download/1212A58A8CE34365BD566AB2B1382AD5" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            &nbsp;the Associate Form.
          </i>
          <p>Upload the completed form below.</p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Licence Application Associates"
              [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
              fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
              (numberOfUploadedFiles)="uploadedAssociateDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD ASSOCIATE FORM, DRAG FILE HERE OR'" #mainForm>
            </app-file-uploader>
          </section>
          <br>
        </div>

        <div class="ngtest-financial-integrity-upload"
          *ngIf="application?.applicationType?.showFinancialIntegrityFormUpload">
          <hr><br>
          <label for="">Business Financial Integrity Form</label>
          <br>
          <i>
            Please download <a href="https://www2.gov.bc.ca/assets/download/E840994D9D304AFE8D56A50666281B9D" download
              target="_blank" rel="noopener noreferrer">and complete</a> the financial integrity form.
          </i>
          <p>Upload the completed form below.</p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Licence Application Financial Integrity"
              [enableFileDeletion]="!isOpenedByLGForApproval" [disableUploads]="isOpenedByLGForApproval"
              fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
              (numberOfUploadedFiles)="uploadedFinancialIntegrityDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD FINANCIAL INTEGRITY FORM, DRAG FILE HERE OR'" #financialIntegrityDocuments>
            </app-file-uploader>
          </section>
        </div>

        <section class="ngtest-supporting-documents"
          *ngIf="application?.applicationType?.showSupportingDocuments &&  (application?.applicationType?.name !== ApplicationTypeNames.Marketer || account?.businessType !== 'SoleProprietor')">
          <hr>
          <br>
          <label for="">Supporting Documents</label>
          <br>
          <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer">
            Please download the
            <span *ngIf=" application?.applicationType?.name !== ApplicationTypeNames.CRSTransferofOwnership">
              <a *ngIf="account?.businessType === 'SoleProprietor'"
                href="https://www2.gov.bc.ca/assets/download/EEC8AD886FA04CD48D78FD22A375A7D8" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'Society'"
                href="https://www2.gov.bc.ca/assets/download/8FFCF0DA701842F99D4A80F05174A71A" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'IndigenousNation'"
                href="https://www2.gov.bc.ca/assets/download/87A1FB955AD64660BAC4BF2462226E67" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="businessTypeIsPartnership()"
                href="https://www2.gov.bc.ca/assets/download/13ADA5B32E4242568DB2B72E3566A56D" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf=" businessTypeIsPrivateCorporation()"
                href="https://www2.gov.bc.ca/assets/download/9D237C8721B1475FB95534037AE21829" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
            </span>
            <span *ngIf=" application?.applicationType?.name === ApplicationTypeNames.CRSTransferofOwnership">
              <a *ngIf="account?.businessType === 'SoleProprietor'"
                href="https://www2.gov.bc.ca/assets/download/300E2E17AA3F4EFE9B555F86B065BE9E" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'Society'"
                href="https://www2.gov.bc.ca/assets/download/9CC0BA56735E466AB09FEAEE3241F46C" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'IndigenousNation'"
                href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="businessTypeIsPartnership()"
                href="https://www2.gov.bc.ca/assets/download/9A8C9C2E49564C54A2232E60F5B266DB" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf=" businessTypeIsPrivateCorporation()"
                href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
                rel="noopener noreferrer">
                Document Checklist
              </a>
            </span>
            <span *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">
              and assemble
              all
              required documents.
            </span>
            <span *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSLocationChange">
              and assemble
              all
              required documents listed in the 'Documents
              Related to the Proposed Store' section.
            </span>
          </p>
          <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
            <p *ngIf="account?.businessType === 'Society'">
              Please upload the society’s Statement of Directors and Registered Office.
            </p>
            <!-- <p *ngIf="account?.businessType === 'PublicCorporation'">
              Please upload the society’s Statement of Directors and Registered Office.
            </p> -->
            <p *ngIf="businessTypeIsPartnership()">
              Please upload the Partnership Agreement.
            </p>
            <div *ngIf="businessTypeIsPrivateCorporation()">
              <p>Please upload: </p>
              <ul>
                <li>Notice of Articles</li>
                <li>Central Securities Register</li>
              </ul>
            </div>

          </section>

          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Licence Application Supporting"
              [disableUploads]="isOpenedByLGForApproval" [enableFileDeletion]="!isOpenedByLGForApproval"
              (numberOfUploadedFiles)="uploadedSupportingDocuments = $event" [maxNumberOfFiles]="200"
              fileTypes="FILES MUST BE IN PDF, JPEG, OR PNG FORMAT." entityName="application" [entityId]="applicationId"
              [extensions]="['pdf', 'jpg', 'jpeg', 'png']" #supportingDocuments>
            </app-file-uploader>
          </section>
          <br>
        </section>


        <!-- Contact Details -->
        <h3 class="blue-header" *ngIf="!isRAS()">APPLICATION CONTACT DETAILS</h3>
        <h3 class="blue-header" *ngIf="isRAS()"> CONTACT DETAILS</h3>
        <div class=content-bottom>
          <p *ngIf="!isRAS()">
            <i>
              Please provide contact information for the contact that the LCRB should communicate with regarding the
              application. This contact must be authorized to represent the applicant and have the authority to bind the
              applicant.
            </i>
          </p>
          <p *ngIf="isRAS()">
            Please provide contact information for the contact that the LCRB should communicate with regarding the
            information submission.
          </p>
          <address class="padded-section">

            <app-field label="First Name" [required]="true" [valid]="isValidOrNotTouched('contactPersonFirstName')"
              errorMessage="Please enter the business contact's first name">
              <input class="form-control" style="width: 350px;" type="text" autocomplete="given-name"
                formControlName="contactPersonFirstName" id="contactPersonFirstName">
            </app-field>

            <app-field label="Last Name" [required]="true" [valid]="isValidOrNotTouched('contactPersonLastName')"
              errorMessage="Please enter the business contact's last name">
              <input class="form-control" style="width: 350px;" type="text" autocomplete="family-name"
                formControlName="contactPersonLastName" id="contactPersonLastName">
            </app-field>

            <app-field label="Title/ Position" [required]="false" [valid]="true">
              <input class="form-control" style="width: 350px;" type="text" formControlName="contactPersonRole">
            </app-field>

            <app-field label="Phone Number (main)" [required]="true" [valid]="isValidOrNotTouched('contactPersonPhone')"
              errorMessage="Please enter the business contact's 10-digit phone number">
              <input class="form-control" style="width: 250px;" maxlength="10" autocomplete="tel"
                (keydown)="rejectIfNotDigitOrBackSpace($event)" type="text" formControlName="contactPersonPhone">
            </app-field>

            <app-field label="Email" [required]="true" [valid]="isValidOrNotTouched('contactPersonEmail')"
              errorMessage="Please enter the business contact's email address"
              afterLabelText="By submitting the email address, you agree that the Liquor and Cannabis Regulation Branch can use it to communicate with you about your application.">
              <input class="form-control" style="width: 350px;" type="text" autocomplete="email"
                formControlName="contactPersonEmail" id="contactPersonEmail"
                (blur)="trimValue(form.get('contactPersonEmail'))">
            </app-field>
          </address>
        </div>

        <!-- Declarations section -->
        <h3 class="blue-header ngtest-declarations" *ngIf="application?.applicationType?.showDeclarations">
          DECLARATIONS
        </h3>
        <div class="padded-section content-bottom" *ngIf="application?.applicationType?.showDeclarations">
          <ng-container *ngIf="!application?.applicationType?.showLiquorDeclarations">
            <section>
              <div *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer && !isRAS()">
                The application must only be submitted by an individual with the authority to bind the applicant. The
                branch
                relies on the applicant to ensure that the individual who submits this application is authorized to do
                so.
                Typically, an appropriate individual in a corporation will be a duly authorized signatory who will
                usually
                be
                an officer or, in some cases, a director
              </div>
              <div *ngIf="isRAS()">
                <p>The Rural Agency Store Information Submission must only be submitted by an individual with the
                  authority to bind the Rural Agency Store. The branch relies on the Rural Agency Store Owner to ensure
                  that the individual who submits this information is authorized to do so. Typically, an appropriate
                  individual in a corporation will be a duly authorized signatory who will usually be an officer, or, in
                  some cases, a director. Note: A lawyer or consultant may NOT submit information on behalf of the Rural
                  Agency Store.</p>
              </div>
              <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
                <p *ngIf="account?.businessType === 'SoleProprietor'">
                  This application should be submitted the sole proprietor.
                </p>
                <p *ngIf="account?.businessType === 'Society'">
                  This application must only be submitted by an individual with the authority to bind the applicant. The
                  branch relies on the applicant to ensure that the individual who submits this application is
                  authorized to
                  do so. Typically, an appropriate individual for a society will be a director or a senior manager (as
                  defined in the Societies Act).
                </p>
                <p *ngIf="account?.businessType === 'PublicCorporation'">
                  This application must only be submitted by an individual with the authority to bind the applicant. The
                  branch relies on the applicant to ensure that the individual who submits this application is
                  authorized to
                  do so. Typically, an appropriate individual in a corporation will be a duly authorized signatory who
                  will
                  usually be an officer or, in some cases, a director.
                </p>
                <div *ngIf="businessTypeIsPartnership()">
                  <p>
                    This application must only be submitted by an individual with the authority to bind the applicant.
                    The
                    branch relies on the applicant to ensure that the individual who submits this application is
                    authorized
                    to do so. Typically, an appropriate individual will be as follows:
                  </p>
                  <ul>
                    <li>If the applicant is a general partnership, one of the general partners</li>
                    <li>If the applicant is a limited partnership, the general partner of the partnership</li>
                  </ul>
                </div>
                <p *ngIf="businessTypeIsPrivateCorporation()">
                  The application must only be submitted by an individual with the authority to bind the applicant. The
                  branch relies on the applicant to ensure that the individual who submits this application is
                  authorized to
                  do so. Typically, an appropriate individual in a corporation will be a duly authorized signatory who
                  will
                  usually be an officer or, in some cases, a director.
                </p>

              </div>

            </section>
            <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer && !isRAS()">
              Note: A lawyer or
              consultant,
              may NOT submit this application on behalf of
              the applicant.
            </p>
            <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
              <p *ngIf="businessTypeIsPrivateCorporation()">
                Note: A lawyer or consultant, may NOT submit this application on behalf of the applicant.
              </p>
              <p *ngIf="!businessTypeIsPrivateCorporation()">
                Note: A lawyer, licensee representative or third party operator may NOT submit this application on
                behalf of
                the applicant.
              </p>
            </section>

            <app-field [valid]="!showValidationMessages || form.get('authorizedToSubmit').valid"
              errorMessage="Please affirm that you are authorized to submit the application." [showChevrons]="false">
              <section style="display: flex">
                <input type="checkbox" formControlName="authorizedToSubmit" id="authorizedToSubmit">
                <span class="error-states">*</span>
                <div style="padding-left: 10px;" *ngIf="!isRAS()">
                  I understand and affirm that I am authorized to submit the application
                </div>
                <div style="padding-left: 10px;" *ngIf="isRAS()">
                  I understand and affirm that I am authorized to submit this information.
                </div>
              </section>
            </app-field>
            <p *ngIf="application?.licenseType == 'Cannabis Retail Store' || application?.licenseType == 'Marketer'">
              Section 22(2) of the Cannabis Control and Licensing Act states: “A person must not submit to the general
              manager
              an application, or
              information or a record included as part of the application, that contains false or misleading
              information, or
              fails to disclose a material fact”.
            </p>
            <p *ngIf="application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'Marketer'">
              Section 20 (1) of the Liquor Control and Licensing Act states: "The general manager may refuse to issue,
              renew, transfer or amend a licence if the applicant fails to disclose a material fact required by the
              application or makes a false or misleading statement in the application."
            </p>

            <app-field [valid]="!showValidationMessages || form.get('signatureAgreement').valid"
              errorMessage="Please affirm that all of the information provided for this application is true and complete."
              [showChevrons]="false">
              <section style="display: flex">
                <input type="checkbox" formControlName="signatureAgreement" id="signatureAgreement">
                <span class="error-states">*</span>
                <div style="padding-left: 10px;" *ngIf="!isRAS()">
                  I understand and affirm that all of the information provided for this
                  application is true and complete
                </div>
                <div style="padding-left: 10px;" *ngIf="isRAS()">
                  I understand and affirm that all of the information provided is true and complete
                </div>
              </section>
            </app-field>
          </ng-container>
          <ng-container *ngIf="application?.applicationType?.showLiquorDeclarations">
            <p>
              <strong>
                The application must only be submitted by an individual with the authority to bind the applicant.
                The branch relies on the applicant to ensure that the individual who submits this application is
                authorized to do so. Typically, an appropriate individual in a corporation will be a duly authorized
                signatory who will usually be an officer or, in some cases, a director. Note: A lawyer or
                consultant, may NOT submit this application on behalf of the applicant.
              </strong>
            </p>
            <app-field [valid]="!showValidationMessages || form.get('authorizedToSubmit').valid"
              errorMessage="Please affirm that you are authorized to submit the application." [showChevrons]="false">
              <section style="display: flex">
                <input type="checkbox" formControlName="authorizedToSubmit">
                <span class="error-states">*</span>
                <div style="padding-left: 10px;">
                  I understand and affirm that I am authorized to submit the
                  application
                </div>
              </section>
            </app-field>
            <p>
              <strong>
                Section 20(1) of the Liquor Control and Licensing Act states: “The general manager may refuse to
                issue,
                renew, transfer or amend a licence if the applicant fails to disclose a material fact required by
                the
                application or makes a false or misleading statement in the application.”
              </strong>
            </p>
            <app-field [valid]="!showValidationMessages || form.get('signatureAgreement').valid"
              errorMessage="Please affirm that all of the information provided for this application is true and complete."
              [showChevrons]="false">
              <section style="display: flex">
                <input type="checkbox" formControlName="signatureAgreement">
                <span class="error-states">*</span>
                <div style="padding-left: 10px;">
                  I understand and affirm that all of the information provided
                  for this
                  application is true and complete
                </div>
              </section>
            </app-field>
          </ng-container>
        </div>


        <section class="error mt-3" *ngIf="showValidationMessages">
          <p *ngFor="let message of validationMessages">
            <span class="app-cancel">
              <mat-icon aria-label="error icon" style="font-size: 15px;">error</mat-icon>
              {{message}}
            </span>
          </p>
        </section>



        <!-- Next Steps -->
        <h3 *ngIf="htmlContent?.nextSteps" class="blue-header">
          What happens next?
        </h3>
        <section *ngIf="htmlContent?.nextSteps" class="padded-section content-bottom">
          <div class="ngtest-before-starting-content" [innerHTML]="htmlContent.nextSteps"></div>
        </section>

        <!-- Proceed to Pay-->

        <section class="d-flex" style="margin-top:15px;" *ngIf="!isRAS()">

          <div class="flex-grow-0" style="width: 50px; background-color: #E1E8F2;"></div>
          <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">

            <p>Proceed to pay online using a credit card through the secure web portal.</p>

            <p>
              <i>
                <b>Please note:</b> Applications which are submitted without all required information or documents will
                not be
                processed. Applicants will be contacted and provided the opportunity to submit missing information. Once
                applicants provide all required documents to the LCRB, the application will be processed.
              </i>
            </p>

            <div>
              <p *ngIf="application?.licenseType === 'Cannabis Retail Store'">
                The Province does not know how many application for a cannabis retail store licence will be received.
                Therefore, it is difficult to predict how long applications will take to process. To minimize delays in
                processing, applicants must make sure the application is complete before submitting it.
              </p>
              <p *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
                The Province does not know how many applications for a cannabis marketing licence will be received.
                Therefore,
                it is difficult to predict how long applications will take to process. To minimize delays in processing,
                applicants must make sure the application is complete before submitting it.
              </p>

              <br>

              <div *ngIf="application?.licenseType === 'Cannabis Retail Store'">
                For questions on the LCRB application process, please contact: <a
                  href="javascript: void(0);">lcrbcannabis@gov.bc.ca</a>
              </div>
              <div *ngIf="application?.licenseType !== 'Cannabis Retail Store'">
                For questions on the LCRB application process, please contact: <a
                  href="javascript: void(0);">LCRBLiquor@gov.bc.ca</a>
              </div>

            </div>
          </div>
        </section>

        <section appRemoveIfFeatureOff="LGApprovals" class="ngtest-opened-by-lg" *ngIf="isOpenedByLGForApproval">
          <app-lg-in-confirmation-of-receipt *ngIf="application" [application]="application">
          </app-lg-in-confirmation-of-receipt>
        </section>


        <!-- button section -->
        <section *ngIf="!isOpenedByLGForApproval" style="position: relative; margin-top: 20px;">
          <button *ngIf="account?.businessType === 'LocalGovernment '" class="btn btn-secondary"
            style="margin-right:10px;" (click)="saveForLater()">
            <span>
              <i class="fa fa-save"></i>
              SAVE FOR LATER
            </span>
          </button>
          <button *ngIf="!application?.applicationType?.isShowLGINApproval" class="btn btn-primary"
            (click)="submit_application()">
            SUBMIT&nbsp;<span *ngIf="!skipPayment && !isRAS()">&amp; PAY</span>
          </button>
          <button *ngIf="application?.applicationType?.isShowLGINApproval" class=" btn btn-primary"
            (click)="submitForLGINApproval()">
            Submit For LG/IN Approval
          </button>

          <span style="float: right; color: #1a5a96; padding-top: 10px;">
            <span (click)="cancelApplication()">
              <i class="fas fa-trash-alt" style="color: #1a5a96;"></i>
              <a href="javascript: void(0)" id="cancelApp">
                Cancel <span *ngIf="!isRAS()">Application</span>
              </a>
            </span>
          </span>

          <div [ngBusy]="busy"></div>
        </section>



      </div>
    </div>

    <div [ngClass]="{'normal-mode': mode !== UPLOAD_FILES_MODE}">
      <div [formGroup]="form" style="padding-left: 45px; position: relative">
        <div [ngBusy]="busy"></div>
        <h1 *ngIf="application">Add More files to the Application</h1>
      </div>
      <div *ngIf="application" class="application-wrapper">
        <label for="">Establishment Name</label>:
        <span style="color: #1a5a96;">{{form.controls['establishmentName'].value}}</span>
        <br>

        <div *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">

          <label for="">Associates Form</label>
          <br>
          <i>
            Please download
            <a *ngIf="account?.businessType === 'SoleProprietor'"
              href="https://www2.gov.bc.ca/assets/download/A61C46EE12464E76BE9594B674CADB93" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf="account?.businessType === 'Society'"
              href="https://www2.gov.bc.ca/assets/download/44B8FA4AA8974880AA1A7392ACC1E406" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf="businessTypeIsPartnership()"
              href="https://www2.gov.bc.ca/assets/download/1002E9464D8349EC8894407AF057446B" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            <a *ngIf=" businessTypeIsPrivateCorporation()"
              href="https://www2.gov.bc.ca/assets/download/1212A58A8CE34365BD566AB2B1382AD5" download target="_blank"
              rel="noopener noreferrer">
              and complete
            </a>
            &nbsp;the Associate Form..
          </i>
          <p>Upload the completed form below.</p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Licence Application Associates"
              [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false"
              entityName="application" (numberOfUploadedFiles)="uploadedAssociateDocuments = $event"
              [enableFileDeletion]="false" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD ASSOCIATE FORM, DRAG FILE HERE OR'" #mainForm>
            </app-file-uploader>
          </section>
          <br>
          <hr>
          <br>

          <label for="">Financial Integrity Form</label>
          <br>
          <i>
            Please download <a href="https://www2.gov.bc.ca/assets/download/E840994D9D304AFE8D56A50666281B9D" download
              target="_blank" rel="noopener noreferrer">and complete</a> the financial integrity form.
          </i>
          <p>Upload the completed form below.</p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Licence Application Financial Integrity"
              [disableUploads]="isOpenedByLGForApproval" fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false"
              entityName="application" (numberOfUploadedFiles)="uploadedFinancialIntegrityDocuments = $event"
              [enableFileDeletion]="false" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD FINANCIAL INTEGRITY FORM, DRAG FILE HERE OR'" #financialIntegrityDocuments>
            </app-file-uploader>
          </section>
          <br>
          <hr>
        </div>
        <label for="">Supporting Documents</label>
        <br>
        <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer">
          Please download the
          <span *ngIf=" application?.applicationType?.name !== ApplicationTypeNames.CRSTransferofOwnership">
            <a *ngIf="account?.businessType === 'SoleProprietor'"
              href="https://www2.gov.bc.ca/assets/download/EEC8AD886FA04CD48D78FD22A375A7D8" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'Society'"
              href="https://www2.gov.bc.ca/assets/download/8FFCF0DA701842F99D4A80F05174A71A" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'IndigenousNation'"
              href="https://www2.gov.bc.ca/assets/download/87A1FB955AD64660BAC4BF2462226E67" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="businessTypeIsPartnership()"
              href="https://www2.gov.bc.ca/assets/download/13ADA5B32E4242568DB2B72E3566A56D" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf=" businessTypeIsPrivateCorporation()"
              href="https://www2.gov.bc.ca/assets/download/9D237C8721B1475FB95534037AE21829" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
          </span>
          <span *ngIf=" application?.applicationType?.name === ApplicationTypeNames.CRSTransferofOwnership">
            <a *ngIf="account?.businessType === 'SoleProprietor'"
              href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'Society'"
              href="https://www2.gov.bc.ca/assets/download/9CC0BA56735E466AB09FEAEE3241F46C" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'IndigenousNation'"
              href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="businessTypeIsPartnership()"
              href="https://www2.gov.bc.ca/assets/download/9A8C9C2E49564C54A2232E60F5B266DB" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf=" businessTypeIsPrivateCorporation()"
              href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
              rel="noopener noreferrer">
              Document Checklist
            </a>
          </span>
          <span *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">
            and assemble
            all
            required documents.
          </span>
          <span *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSLocationChange">
            and assemble
            all
            required documents listed in the 'Documents
            Related to the Proposed Store' section.
          </span>
        </p>
        <section *ngIf="ApplicationTypeNames.Marketer === application?.applicationType?.name">
          <p *ngIf="account?.businessType === 'Society'">
            Please upload the society’s Statement of Directors and Registered Office.
          </p>
          <!-- <p *ngIf="account?.businessType === 'PublicCorporation'">
            Please upload the society’s Statement of Directors and Registered Office.
          </p> -->
          <p *ngIf="businessTypeIsPartnership()">
            Please upload the Partnership Agreement.
          </p>
          <div *ngIf="businessTypeIsPrivateCorporation()">
            <p>Please upload: </p>
            <ul>
              <li>Notice of Articles</li>
              <li>Central Securities Register</li>
            </ul>
          </div>

        </section>
        <section>
          <app-file-uploader *ngIf="applicationId" documentType="Licence Application Supporting"
            [disableUploads]="isOpenedByLGForApproval" fileTypes="FILES MUST BE IN PDF, JPEG, OR PNG FORMAT."
            entityName="application" [entityId]="applicationId" [maxNumberOfFiles]="200"
            (numberOfUploadedFiles)="uploadedSupportingDocuments = $event" [extensions]="['pdf', 'jpg', 'jpeg', 'png']"
            [enableFileDeletion]="false" #supportingDocuments>
          </app-file-uploader>
        </section>
        <br>
        <hr>
      </div>
    </div>
  </ng-template>

  <ng-template #indigenousContent>
    <section class="large-screen-only" *ngIf="account?.businessType !== 'LocalGovernment'">
      <h3 class="blue-header" style="margin-top: 0; margin-bottom: 0">INDIGENOUS NATION</h3>

      <div [formGroup]="form" class="submitted-content"
        style="background-color: #F1F4FA; border-bottom: 4px solid #E4E4E4">
        <app-field label="Is this application for an Indigenous Nation?" [valid]="true">
          <mat-button-toggle-group formControlName="applyAsIndigenousNation" aria-label="Font Style">
            <mat-button-toggle [value]="true">Yes</mat-button-toggle>
            <mat-button-toggle [value]="false">No</mat-button-toggle>
          </mat-button-toggle-group>
        </app-field>

        <div *ngIf="form.get('applyAsIndigenousNation').value" style="margin-top: 10px; margin-bottom: 10px;">
          Third party agents or consultants cannot apply on behalf of an Indigenous nation. The application and all
          supporting documents will be connected to the BCeID used at log-in.
        </div>

        <app-field label="Select the Indigenous nation" [valid]="isValidOrNotTouched('indigenousNationId')"
          *ngIf="form.get('applyAsIndigenousNation').value" errorMessage="Please select the Indigenous nation">
          <select class="form-control" formControlName="indigenousNationId" style="width: 250px;">
            <option value=""></option>
            <option [value]="item.id" *ngFor="let item of indigenousNations">{{item.name}}</option>
          </select>
        </app-field>
      </div>
    </section>
    <app-associate-content *ngIf="account?.businessType !== 'LocalGovernment'" [account]="account"
      [showBothContents]="false" [isIndigenousNation]="form.get('applyAsIndigenousNation').value">
    </app-associate-content>
  </ng-template>

  <div class="dashboard-spacing" style="position: relative" appRemoveIfFeatureOff="IndigenousNation">
    <div [ngBusy]="busy"></div>
    <div class="row">
      <div class="col-md-7 col-sm-12">
        <ng-container *ngTemplateOutlet="applicationContent"></ng-container>
      </div>
      <div class="col-md-4 col-sm-12"
        *ngIf="application?.applicationType?.name === ApplicationTypeNames.CannabisRetailStore">
        <h1>&nbsp;</h1>
        <ng-container *ngTemplateOutlet="indigenousContent"></ng-container>
      </div>
    </div>
  </div>

  <div appRemoveIfFeatureOn="IndigenousNation">
    <div [ngBusy]="busy"></div>
    <ng-container *ngTemplateOutlet="applicationContent">
    </ng-container>
  </div>
</div>
