<div class="col-md-12" *ngIf="componentLoaded">
  <h1>Business Profile</h1>
  <h2 *ngIf="currentUser">{{ currentUser.businessname }}</h2>
  <div class="col-sm-3 col-md-2" style="padding-left: 0">
    <!-- required for floating -->
    <!-- Nav tabs -->
    <ul class="nav nav-tabs">
      <li *ngIf="tabStructure.indexOf('before-you-start') !== -1" [ngClass]="{'active': view_tab == 'before-you-start'}">
        <a (click)="changeTab('before-you-start')">Before You Start</a>
      </li>
      <li *ngIf="tabStructure.indexOf('corporate-details') !== -1"  [ngClass]="{'active': view_tab == 'corporate-details'}">
        <a (click)="changeTab('corporate-details')">
          <span *ngIf="['private-corporation', 'ucl-llc', 'public'].indexOf(businessTypeSel.value) !== -1">Corporate Details</span>
          <span *ngIf="businessTypeSel.value == 'society'">Society Details</span>
          <span *ngIf="['partnership', 'limited', 'limited-liability'].indexOf(businessTypeSel.value) !== -1">Partnership Details</span>
          <span *ngIf="businessTypeSel.value == 'sole-proprietor'">Sole-Prop Details</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('organization-structure') !== -1" [ngClass]="{'active': view_tab == 'organization-structure'}">
        <a (click)="changeTab('organization-structure')">
          <span>Organization Structure</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('directors-and-officers') !== -1" [ngClass]="{'active': view_tab == 'directors-and-officers'}">
        <a (click)="changeTab('directors-and-officers')">
          <span *ngIf="['society'].indexOf(businessTypeSel.value) == -1">Directors &amp; Officers</span>
          <span  *ngIf="['society'].indexOf(businessTypeSel.value) !== -1">Directors &amp; Senior Managers</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('key-personnel') !== -1" [ngClass]="{'active': view_tab == 'key-personnel'}">
        <a (click)="changeTab('key-personnel')">
          <span>Key Personnel</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('shareholders') !== -1" [ngClass]="{'active': view_tab == 'shareholders'}">
        <a (click)="changeTab('shareholders')">
          <span *ngIf="['private-corporation', 'ucl-llc', 'public'].indexOf(businessTypeSel.value) !== -1">Shareholders</span>
          <span *ngIf="['partnership','limited', 'limited-liability'].indexOf(businessTypeSel.value) !== -1">Partners</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('connections-to-producers') !== -1" [ngClass]="{'active': view_tab == 'connections-to-producers'}">
        <a (click)="changeTab('connections-to-producers')">
          <span >Connections to Producers</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('finance-integrity') !== -1" [ngClass]="{'active': view_tab == 'finance-integrity'}">
        <a (click)="changeTab('finance-integrity')">
          <span>Finance Information</span>
        </a>
      </li>
      <li *ngIf="tabStructure.indexOf('security-assessment') !== -1" [ngClass]="{'active': view_tab == 'security-assessment'}">
        <a (click)="changeTab('security-assessment')">
          <span>Security Assessments</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="col-md-9 col-sm-9">
    <select name="" id="" (change)="onBusinessTypeChange(businessTypeSel.value)" #businessTypeSel>
      <option value="private-corporation">private-corporation</option>
      <option value="partnership">partnership</option>
      <option value="society">society</option>
      <option value="sole-proprietor">sole-proprietor</option>
      <option value="ucl-llc">ucl-llc</option>
      <option value="public">public</option>
      <option value="limited">limited</option>
      <option value="limited-liability">limited-liability</option>
    </select>
    <br>
    <!-- Tab panes -->
    <div [hidden]="view_tab != 'before-you-start'">
      <app-before-you-start [businessType]="businessTypeSel.value"></app-before-you-start>
    </div>
    <div [hidden]="view_tab != 'corporate-details'">
      <app-corporate-details [accountId]="accountId" [businessType]="businessTypeSel.value"></app-corporate-details>
    </div>
    <div [hidden]="view_tab != 'organization-structure'">
      <app-organization-structure [accountId]="accountId"  [businessType]="businessTypeSel.value"></app-organization-structure>
    </div>
    <div [hidden]="view_tab != 'directors-and-officers'">
      <app-directors-and-officers [accountId]="accountId" [businessType]="businessTypeSel.value"></app-directors-and-officers>
    </div>
    <div [hidden]="view_tab != 'key-personnel'">
      <app-key-personnel [accountId]="accountId" [businessType]="businessTypeSel.value"></app-key-personnel>
    </div>
    <div [hidden]="view_tab != 'shareholders'">
      <app-edit-shareholders [accountId]="accountId" [businessType]="businessTypeSel.value"></app-edit-shareholders>
    </div>
    <div [hidden]="view_tab != 'connections-to-producers'">
      <app-connection-to-producers [accountId]="accountId" [businessType]="businessTypeSel.value"></app-connection-to-producers>
    </div>
    <div [hidden]="view_tab != 'finance-integrity'">
      <app-financial-information [accountId]="accountId"  [businessType]="businessTypeSel.value"></app-financial-information>
    </div>
    <div [hidden]="view_tab != 'security-assessment'">
      <app-security-assessments [accountId]="accountId" [businessType]="businessTypeSel.value"></app-security-assessments>
    </div>
    <p>&nbsp;</p>
    <div class="col-md-10 row">
      <a class="globalButton" *ngIf="view_tab != 'before-you-start'" class="btn btn-secondary" tabindex="1" (click)="back()">
        <strong>Back</strong>
        <br>
      </a>
      &nbsp;
      <a class="globalButton" class="btn btn-primary" tabindex="2" (click)="next()">
        <strong *ngIf="view_tab != 'before-you-start'">Next</strong>
        <strong *ngIf="view_tab == 'before-you-start'">Start</strong>
        <br>
      </a>
    </div>
  </div>
</div>